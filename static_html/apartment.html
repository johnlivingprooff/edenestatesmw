<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Written by John-Livngprooff -->
    <title>Studio-Loft Apartments―A Slice of Heaven</title>
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/rooms.css">
    <link rel="stylesheet" href="./styles/booking-form.css">
    <link rel="shortcut icon" href="images/emblem.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9965595303680053"
     crossorigin="anonymous"></script>
</head>
<body>
    <header class="section header">
        <img src="images/emblem.png" alt="Eden_Logo" id="logo">
        <div class="nav-bar"><ul>
            <li><a href="index">Home</a></li>
            <li><a href="about">About</a></li>
            <li><a href="gallery">Gallery</a></li>
            <li><a href="blog">Blog</a></li>
        </ul>
        </div>
        <a href="booking">
            <button id="book-now">Book Now</button>
        </a>
    </header>

    <section class="section sect-two">
        <div class="side-img-cont">
            <img src="images/apt_bed.jpg" alt="WELCOME">
        </div>
        <span>
            <h1>Studio-Loft Apartments</h1>
            <p>Our apartments are portable and yet fully furnished <br>
                to give lost stayers maximum comfort. The apartments’ <br>
                tenants also enjoy a wide range of services that the Estate <br>
                offers, including swimming (private), wide beautiful gardens <br>
                for relaxation, a continental bar and restaurant <br>and a Playcentre for kids. <br>
                <br><br>Available for short- and long-term lease as well <br>
                as day-to-day rentals. Occupies up to three adults.</p>
            <button id="explore"><a href="#acc_sect">EXPLORE</a></button>
        </span>
    </section>

    <script>
        // Function to handle form submission
        function submitForm() {
            // Perform AJAX request to submit form data to the PHP script
            // Assuming you're using the Fetch API for simplicity
            fetch('backend/deluxe_booking.php', {
                method: 'POST',
                body: new FormData(document.getElementById('reservation-form'))
            })
            .then(response => response.text()) // Get response text
            .then(data => {
                // Check if the PHP script echoed "success"
                if (data.trim() === 'success') {
                    // If "success" is echoed, redirect to the thank-you page
                    window.location.href = 'https://example.com/thank-you.html';
                } else {
                    // If not successful, handle the error or display a message to the user
                    console.error('Failed to send reservation email.');
                }
            })
            .catch(error => {
                // Handle any errors that occur during the fetch operation
                console.error('Error:', error);
            });
        }
    </script>
    <!-- booking place -->
    <section class="section sect-four" id="acc_sect">
        <div id="reserve-form">
            <h2>Reserve your Room</h2>
    
            <form id="reservation-form" onsubmit="submitForm(); return false;">
    
                <!-- <label for="checkin">Check-in Date: *</label> -->
                <input type="date" name="checkin" id="checkin" required>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <!-- <label for="checkout">Check-out Date: *</label> -->
                <input type="date" name="checkout" id="checkout" required><br>
                
                <label for="adults">Adults</label>
                <select name="adults" id="adults" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                
                <label for="kids">Kids</label>
                <select name="kids" id="kids" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                
                <label for="rooms"># of Rooms</label>
                <select name="rooms" id="rooms" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <!-- Add more options as needed -->
                </select>
    
                <br><br>
                <input type="text" name="firstName" placeholder="First Name" required>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="text" name="lastName" placeholder="Last Name" required>
                <br>
                <input type="phone" name="phone" placeholder="Phone" required>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="email" name="email" placeholder="Your Email" required>
                <br><br><br>
                <input type="text" name="guestNames" placeholder="Guest Name(s)" required>
                <br><br>
                <label for="vitalInfo">Any Vital Info you'd like to share:</label>
                <br><br>
                <textarea name="vitalInfo" id="vitalInfo" rows="4" required></textarea>
                <br><br>
                <button type="submit">Book Now</button>
            </form>
        </div>
        <div class="side-res-form">
            <h2>Number of Nights</h2>
            <p id="num_nights_paragraph">-</p>
    
            <h2>Number of Rooms</h2>
            <p id="num_rooms_paragraph">-</p>
    
            <p id="price_paragraph">-</p>
        </div>
    </section>
    <script>
        // Function to handle form submission
        function submitForm() {
            // Perform AJAX request to submit form data to the PHP script
            // Assuming you're using the Fetch API for simplicity
            fetch('backend/apartment.php', {
                method: 'POST',
                body: new FormData(document.getElementById('reservation-form'))
            })
            .then(response => {
                // Handle the response here, but always redirect regardless of response
                window.location.href = 'https://edenestatesmw.com/thank-you';
            })
            .catch(error => {
                // Handle any errors that occur during the fetch operation
                console.error('Error:', error);
                // You can still log the error and inform the user if needed
                alert('There was an error processing your request. Please try again later.');
            });
        }


        // Get the check-in, check-out, and adult guests input elements
        const checkinInput = document.getElementById('checkin');
        const checkoutInput = document.getElementById('checkout');
        const adultGuestsSelect = document.getElementById('adults');

        // Function to calculate the number of nights between two dates
        function calculateNights(checkin, checkout) {
            const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
            const firstDate = new Date(checkin);
            const secondDate = new Date(checkout);

            const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));
            return diffDays;
        }

        // Update the side reservation form elements
        function updateSideForm() {
            const numNights = calculateNights(checkinInput.value, checkoutInput.value);
            const numRooms = document.getElementById('rooms').value;
            const adultGuests = adultGuestsSelect.value;

            let pricePerNight = 110; // Default price per night

            // Adjust price based on the number of adult guests
            if (adultGuests === '1') {
                pricePerNight = 100; // Adjusted price for 1 adult guest
            }

            const price = numNights * numRooms * pricePerNight;

            document.getElementById('num_nights_paragraph').textContent = numNights;
            document.getElementById('num_rooms_paragraph').textContent = numRooms;
            document.getElementById('price_paragraph').textContent = '$' + price + '/night';
        }

        // Function to set minimum checkout date based on check-in date
        function setMinCheckoutDate() {
            const minDate = checkinInput.value;
            checkoutInput.min = minDate;
            if (checkoutInput.value < minDate) {
                checkoutInput.value = minDate;
            }
            updateSideForm();
        }

        // Function to set minimum check-in date to today
        function setMinCheckinDate() {
            const today = new Date();
            const dd = String(today.getDate()).padStart(2, '0');
            const mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
            const yyyy = today.getFullYear();
            const minDate = yyyy + '-' + mm + '-' + dd;
            checkinInput.min = minDate;
            if (checkinInput.value < minDate) {
                checkinInput.value = minDate;
            }
            setMinCheckoutDate();
        }

        // Event listeners to update side reservation form on input change
        checkinInput.addEventListener('change', setMinCheckoutDate);
        checkoutInput.addEventListener('change', updateSideForm);
        adultGuestsSelect.addEventListener('change', updateSideForm);

        // Initialize minimum check-in date to today
        setMinCheckinDate();
    </script>

    
    
    <!-- Contact Us -->
    <section class="section sect-contact">
        <div id="contact-form">
            <h2>Contact Us</h2>
    
            <form id="contct-form">
                <input type="text" id="name" placeholder="Your Name" required><br>
                <input type="phone" id="phone" placeholder="Phone" required><br>
                <input type="email" id="email" placeholder="Your Email" required><br><br>
                <label for="message">Leave Your Message:</label><br><br>
                <textarea id="message" rows="4" required></textarea><br><br>
                <button type="submit">Submit</button>
            </form><br>
            <div id="contact-message"></div>
        </div>
        <script src="scripts/contact-form.js"></script>
        <div class="side-img-form"></div>
    </section>
    <div class="section" id="wa-me">
        <a href="https://wa.me/+265984222331" target="_blank">
            <img src="images/whatsapp-round-icon.png" alt="WhatsApp">
        </a>
    </div>
    <footer class="section footer">
        <div class="addrs">
            <ul>
                <h2>Eden Estates & Resort</h2>
                <p>A Slice of Heaven―©2024</p>
                <li><b>Head Office:</b> Old-Airport Road, S117, Lilongwe</li>
                <li>Malawi, Africa</li>
            </ul>
        </div>
        <div class="f-content">
            <ul>
                <h2>Contacts:</h2>
                <li><a href="mailto:info@edenestatesmw.com">Send Us an Email</a></li>
                <li><a href="tel:+265984222332">Call</a>―<a href="https://wa.me/+265984222331">WhatsApp</a></li>
            </ul>
        </div>
        <div class="f-content">
            <ul>
                <h2>Policies:</h2>
                <li><a href="policies">Bookings/Cancellation</a></li>
                <li><a href="policies">Privacy Policy</a></li>
            </ul>
        </div>
        <div class="f-content">
            <ul>
                <h2>Socials</h2>
                <li><a href="https://facebook.com/edenestatesmw">
                    <img src="images/Facebook Round Black Icon.svg" alt="" width="20px" height="20px">
                </a>
                <a href="https://instagram.com/edenestatesmw">
                    <img src="images/instagram.png" alt="instagram-logo" width="20px" height="20px">
                </a>
                <a href="https://linkedin.com/in/edenestatesmw">
                    <img src="images/linkedin_black_logo_icon_147114.png" alt="linkedin-logo" width="20px" height="20px">
                </a>
                <a href="https://x.com/edenestatesmw">
                    <img src="images/x-social-media-round-icon.png" alt="x-logo" width="20px" height="20px">
                </a></li>
                <li><br>
                    Designed by <a href="https://github.com/johnlivingprooff" target="_blank">81PIXELS</a>
                </li>
            </ul>
        </div>
    </footer>
    <script src="scripts/full-page-animate.js"></script>
</body>
</html>
<!-- God Did -->
